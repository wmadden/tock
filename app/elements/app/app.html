<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/polymer-ui-pages/polymer-ui-pages.html">
<link rel="import" href="/elements/new-task/new-task.html">
<link rel="import" href="/elements/task-display/task-display.html">
<link rel="import" href="/elements/break-display/break-display.html">

<polymer-element name="tock-app">
  <template>
    <link href="app.css" rel="stylesheet" type="text/css">
    <audio id="alarm" src="assets/alarm.ogg" preload="auto"></audio>

    <div id="tock-app">
      <polymer-ui-pages id="view-switcher" valueattr="id" selected="{{ selectedView }}">
        <div id="taskDisplay" class="panel panel-default">
          <div class="panel-body">
            <tock-task-display task="{{ currentTask }}"
                               on-finished="{{ finishTask }}">
            </tock-task-display>
          </div>
        </div>

        <div id="newTask" class="panel panel-default">
          <div class="panel-body">
            <tock-new-task on-start="{{ newTask_onCreate }}">
            </tock-new-task>
          </div>
        </div>

        <div id="breakDisplay" class="panel panel-default">
          <div class="panel-body">
            <tock-break-display break="{{ currentBreak }}"
                                on-abort-break="{{ abortBreak }}">
            </tock-break-display>
          </div>
        </div>
      </polymer-ui-pages>

      <ul id="task-list" class="list-group">
        <template repeat="{{task in tasks}}">
          <li class="list-group-item">
            {{ task.description }}
            <span class="pull-right">
              {{ task.totalPomodoros }} / {{ task.estimatedPomodoros }}
            </span>
          </li>
        </template>
      </ul>
    </div>
  </template>

  <script src="/bower_components/eventemitter2/lib/eventemitter2.js"></script>
  <script src="/scripts/tock/task.js"></script>
  <script src="/scripts/tock/break.js"></script>
  <script src="app.js"></script>
</polymer-element>