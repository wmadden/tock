<link rel="import" href="/elements/clockface/clockface.html">

<polymer-element name="tock-task-display"
                 attributes="task">
  <template>
    <audio id="alarm" src="alarm.ogg" loop preload="auto"></audio>
    <link href="task-display.css" rel="stylesheet" type="text/css">

    <p class="description">
      {{ task.description }}
    </p>

    <template if="{{ task.pomodoroStarted }}">
      <tock-clockface time="{{ task.timeRemaining }}"></tock-clockface>
      <p class="pomodoros">
        {{ task.totalPomodoros }} / {{ task.estimatedPomodoros }} pomodoros
      </p>
      <div class="actions">
        <button class="btn btn-default btn-block" on-click="{{ stopPomodoro }}">Stop pomodoro</button>
      </div>
    </template>

    <template if="{{ !task.pomodoroStarted }}">
      <p class="pomodoros">
        {{ task.totalPomodoros }} / {{ task.estimatedPomodoros }} pomodoros
      </p>
      <div class="actions">
        <button class="btn btn-default" on-click="{{ startNewPomodoro }}">Start new pomodoro</button>
        <button class="btn btn-default" on-click="{{ finishTask }}">Done!</button>
      </div>
    </template>
  </template>

  <script src="/bower_components/underscore/underscore.js"></script>
  <script src="task-display.js"></script>
</polymer-element>